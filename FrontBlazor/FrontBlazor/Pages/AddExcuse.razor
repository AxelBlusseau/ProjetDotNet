@page "/addexcuse"
@using FrontBlazor.Data
@inject NavigationManager NavigationManager


<EditForm Model="@excuse" OnValidSubmit="SaveExcuse">

    <div class="col-12 row">
        <textarea class="form-control col-3" @bind="excuse.Reason" required placeholder="Raison" />
    </div>
    <br />
    <div class="col-12 row">
        <input class="form-control col-3" @bind="excuse.Image" placeholder="Image" />
    </div>

    <div class="col-12 row">
        <span class="col-2"></span>
        <input type="submit" class="form-control col-1 btn btn-primary" value="Publier" />
    </div>

</EditForm>

@code {
    public Excuse excuse { get; set; }

    private void SaveExcuse()
    {
        ExcuseService _excuseService = new ExcuseService();
        excuse.Date = DateTime.Now;
        excuse.UserID = 1;
        _excuseService.AddExcuse(excuse);
        NavigationManager.NavigateTo("/");
    }
        
    protected override void OnInitialized()
    {
        excuse = new Excuse();
    }

}
